!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=r(s),c=n(2),f=r(c),l=n(9),p=r(l),d=n(14),h=r(d),m=n(11);r(m);(0,p["default"])();var v=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return u(e,t),e.prototype.create=function(){var t=(0,f["default"])(),e=(0,f["default"])("h1").txt("Ajax example - Kompo"),n=(0,f["default"])("div"),r=(0,f["default"])("a").h("javascript:void(0);").txt("Click me and load some data"),o=(0,f["default"])("input"),i=(0,f["default"])("p").txt("Successful XHR calls: "),u=i.append("span");n.classList.add("container");var s=new h["default"];return s.before(s["do"](function(t,e,n){console.log("BEFORE SENDING")})),this.on(r,"click",s.when(function(t,e,n,r){return t.preventDefault(),e.url=o.value,e.promise().then(e["do"](function(t,e,n){return console.log("SUCCESS"),console.log(t.response()),e.successCount=e.successCount+1,!0}))["catch"](e["do"](function(t,e,n){console.log("FAILURE")})).then(e["do"](function(t,e,n){console.log("FINALLY")})),!0})),this.react(function(t){u.replace((0,c.createText)(t.successCount))}),t.append(e,!1).append("p").txt("Enter your URL below, make sure it supports cross domain calls. Check the console for the result").parentAppend(n).append(o,!1).append(r,!1).parentAppend(i),t},e}(a["default"]);document.body.append((new v).setState({successCount:0}))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n,r,o){if(e.call(t,n,r,t,o)){var i=t.getRoot();null===i?(0,a["default"])(t.update.bind(t)):(0,a["default"])(i.update.bind(i))}}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),a=r(s),c=n(6),f=r(c),l=n(5),p=r(l),d=n(3),h=r(d),m=n(8),v=(r(m),function(){function t(e){o(this,t);var n=u({},this.constructor.defaultProps);"undefined"!=typeof n&&"undefined"!=typeof e?this.props=(0,f["default"])(n,e):this.props=e||n||{},this.statefulls=[],this.mounts=[],this.stateless=!0,this.isolated=!1,this.initial=!0}return t.prototype.create=function(){throw new Error("Component must override the create method and return an Node object.")},t.prototype.render=function(){return this.initial?(this.root=this.create(),this.initial=!1,Object.defineProperty(this.root,"__kompo_component__",{writable:!0,value:this}),this.root):(this.update(),this.root)},t.prototype.update=function(){for(var t=0,e=this.mounts.length;e>t;t++){var n=this.mounts[t];n.stateless||n.isolated||n.update()}for(var t=0,e=this.statefulls.length;e>t;t++)this.statefulls[t](this.state,this)},t.prototype.mount=function(t){return this.mounts.push(t),t.setParent(this),t.setState(this.state),t},t.prototype.unmount=function(t){var e=this.mounts.indexOf(t);return this.mounts.splice(e,1),this},t.prototype.unmountByIndex=function(t){var e=this.mounts[t];return this.mounts.splice(t,1),e},t.prototype.setParent=function(t){return this.parent=t,this},t.prototype.react=function(t){if(this.stateless)throw new Error("Set state (through mount() or setState()) before registering a react function.");return this.statefulls.push(t),t(this.state,this)},t.prototype.mountRoutedComponent=function(t){var e=this,n=!1;if((0,h["default"])(t))n=!0;else if(!t instanceof Node)throw new Error("Routed Component cannot be assigned. Please make sure parent is a Node or a closure.");return this.react(function(r,o){var i=r.Router.getComponent(e);return i&&(i.setParent(e),i.setState(r),n?t.bind(e)(i,r,o):(0,p["default"])(t,i)),i})},t.prototype.setState=function(t){return this.stateless=!1,this.state=t,this},t.prototype.setIsolatedState=function(t){return this.setState(t),this.isolated=!0,this},t.prototype.nest=function(t){if(1===arguments.length){if(!(0,h["default"])(t))throw new Error("Nesting callback should be a function, please provide a valid callback.");return this.nest=t,this}return this.nest(this.state,this)},t.prototype.on=function(t,e,n,r){var o=this;return 4===arguments.length?!function(){var u=e;e=n,n=r,t.addEventListener(e,function(t){for(var e=void 0,r=void 0,s=t.target;s&&s!=this;s=s.parentNode)if(s.matches(u)&&(e=t),"undefined"!=typeof s.__kompo_component__){r=s.__kompo_component__;break}"undefined"!=typeof e&&i(o,n,e,o.state,r)},!1)}():t.addEventListener(e,function(t){i(o,n,t,o.state)},!1),this},t.prototype.off=function(t,e){return t.removeEventListener(e,i,!1),this},t.prototype.getRoot=function(){if("undefined"==typeof this.parent||this.isolated)return null;for(var t=this.parent;"undefined"!=typeof t.parent&&!t.isolated;)t=t.parent;return t},t}());e["default"]=v},function(t,e){"use strict";function n(t,e){var n=void 0;return n="undefined"==typeof t?u.createElement("div"):u.createElement(t),"undefined"!=typeof e&&r(n,e),n}function r(t,e){for(var n=Object.keys(e),r=0,o=n.length;o>r;r++){var i=n[r],u=e[i];t.setAttribute(i,u)}return t}function o(){return u.createDocumentFragment()}function i(t){return u.createTextNode(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,e.addAttributes=r,e.createFragment=o,e.createText=i;var u=document},function(t,e){"use strict";function n(t){var e={};return t&&"[object Function]"===e.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t){var e="undefined"==typeof t?"undefined":r(t);return"function"==e||t&&"object"==e||!1}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=(0,f["default"])(arguments[2]),s=void 0;return s=o?r?t.lastChild:t.firstChild:n?t.lastChild:t.firstChild,"string"==typeof e&&(e=(0,u["default"])(e)),e instanceof a["default"]&&(e=e.render()),o&&(0,i.addAttributes)(e,n),s?t.replaceChild(e,s):t.appendChild(e),e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var i=n(2),u=r(i),s=n(1),a=r(s),c=n(4),f=r(c)},function(t,e){"use strict";function n(){for(var t=Array.prototype.shift.call(arguments),e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){if(!Element.prototype.matches){var t=Element.prototype;t.webkitMatchesSelector&&(t.matches=t.webkitMatchesSelector),t.msMatchesSelector&&(t.matches=t.msMatchesSelector),t.mozMatchesSelector&&(t.matches=t.mozMatchesSelector)}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){function e(e){return n?e:t+(0,u["default"])(e)}var n="undefined"==typeof t,r=document,o=Element.prototype,i=DocumentFragment.prototype;Object.defineProperty(o,e("attr"),{value:function(t,e){return 1===arguments.length?this.getAttribute(t):(this.setAttribute(t,e),this)}}),Object.defineProperty(o,e("hasAttr"),{value:function(t){return this.hasAttribute(t)}}),Object.defineProperty(o,e("removeAttr"),{value:function(t){return this.removeAttribute(t),this}}),Object.defineProperty(o,e("txt"),{value:function(t){return 1===arguments.length?(this.appendChild(r.createTextNode(t)),this):this.textContent}});var s=e("append"),c=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];return"string"==typeof t&&(t=r.createElement(t)),t instanceof a["default"]&&(t=t.render()),this.appendChild(t),(0,d["default"])(arguments[1])?((0,l.addAttributes)(t,e),n?t:this):e?t:this};Object.defineProperty(o,s,{value:c}),Object.defineProperty(i,s,{value:c}),Object.defineProperty(o,e("parentAppend"),{value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];return this.parentNode.append(t,e,n)}}),Object.defineProperty(o,e("cloneAppend"),{value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this.parentNode.append(this.cloneNode(t))}});var p=e("clone"),h=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this.cloneNode(t)};Object.defineProperty(o,p,{value:h}),Object.defineProperty(i,p,{value:h});var m=e("prepend"),v=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],o=this.firstChild;return"string"==typeof t&&(t=r.createElement(t)),t instanceof a["default"]&&(t=t.render()),o?this.insertBefore(t,o):this.append(t),(0,d["default"])(arguments[1])?((0,l.addAttributes)(t,e),n?t:this):e?t:this};Object.defineProperty(o,m,{value:v}),Object.defineProperty(i,m,{value:v}),Object.defineProperty(o,e("parent"),{value:function(){return this.parentElement||this.parentNode}}),Object.defineProperty(o,e("hasParent"),{value:function(){return!(null===this.parentElement&&null===this.parentNode)}}),Object.defineProperty(o,e("root"),{value:function(t){for(t=t?t:this.parentElement||this.parentNode;null!==(t.parentElement||t.parentNode);)t=this.root(t.parentElement||t.parentNode);return t}});var y=e("query"),b=function(t){return this.querySelector(t)};Object.defineProperty(o,y,{value:b}),Object.defineProperty(i,y,{value:b});var g=e("queryAll"),_=function(t){return this.querySelectorAll(t)};Object.defineProperty(o,g,{value:_}),Object.defineProperty(i,g,{value:_}),"remove"in o||Object.defineProperty(o,e("remove"),{value:function(){var t=this.parentNode;t&&t.removeChild(this)}});var j=e("empty"),O=function(){for(;this.lastChild;)this.removeChild(this.lastChild);return this};Object.defineProperty(o,j,{value:O}),Object.defineProperty(i,j,{value:O}),Object.defineProperty(o,e("log"),{value:function(){return console.log(this),this}}),Object.defineProperty(o,e("replace"),{value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return(0,f["default"])(this,t,e)}}),Object.defineProperty(o,e("replaceWith"),{value:function(t,e){return"string"==typeof t&&(t=r.createElement(t)),"undefined"!=typeof e&&(0,l.addAttributes)(t,e),this.parentNode.replaceChild(this,t),t}}),Object.defineProperty(o,e("before"),{value:function(t,e){var n=this.parentNode;return"string"==typeof t&&(t=r.createElement(t)),t instanceof a["default"]&&(t=t.render()),"undefined"!=typeof e&&(0,l.addAttributes)(t,e),n&&n.insertBefore(t,this),t}}),Object.defineProperty(o,e("after"),{value:function(t,e){var n=this.parentNode,o=this.nextSibling;return"string"==typeof t&&(t=r.createElement(t)),t instanceof a["default"]&&(t=t.render()),"undefined"!=typeof e&&(0,l.addAttributes)(t,e),n&&(o?n.insertBefore(t,o):n.appendChild(t)),t}}),Object.defineProperty(o,e("i"),{value:function(t){return 0===arguments.length?this.id:(this.id=t,this)}}),Object.defineProperty(o,e("n"),{value:function(t){return 0===arguments.length?this.name:(this.name=t,this)}}),Object.defineProperty(o,e("h"),{value:function(t){return 0===arguments.length?this.href:(this.href=t,this)}}),Object.defineProperty(o,e("v"),{value:function(t){return 0===arguments.length?this.value:(this.value=t,this)}})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var i=n(10),u=r(i),s=n(1),a=r(s),c=n(5),f=r(c),l=n(2),p=n(4),d=r(p)},function(t,e){"use strict";function n(t){return"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return function(n,r){var i=e||this,u=t.call(i,n,r);if(!u instanceof o)throw new Error("Action callback should return a Do class.");return Object.defineProperty(u.part,"__kompo_stale__",{writable:!0,value:u.it}),u.it}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=e.Do=function i(t,e){n(this,i),this.it=t,this.part=e}},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),u=r(i),s=n(3),a=r(s),c=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,t),this.url=e,this.options=(0,u["default"])({method:"GET",async:!0,user:"",password:"",beforeSend:null},n),this["native"]=new XMLHttpRequest,this.createPromiseFunction()}return t.prototype.createPromiseFunction=function(){var t=this;this.promiseFunction=function(e,n){t["native"].onreadystatechange=function(){4==t["native"].readyState&&(200==t["native"].status?e(t):n(t))}}},t.prototype.setPromiseFunction=function(t){if(!(0,a["default"])(t))throw new Error("Promise function must be a function.");return this.promiseFunction=t.bind(this),this},t.prototype.promise=function(){return new Promise(this.promiseFunction)},t.prototype.setHeader=function(t,e){return this["native"].setRequestHeader(t,e),this},t.prototype.before=function(t){if(!(0,a["default"])(t))throw new Error("Callback must be a function.");return this.options.beforeSend=t,this},t.prototype.open=function(){this["native"].open(this.options.method,this.url,this.options.async,this.options.user,this.options.password)},t.prototype.send=function(t){return this.open(),(0,a["default"])(this.options.beforeSend)&&this.options.beforeSend(this),this["native"].send(t),this},t.prototype.abort=function(){return this["native"].abort(),this},t.prototype.response=function(){return this["native"].responseText},t.prototype.jsonResponse=function(){return JSON.parse(this["native"].responseText)},t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(13),a=r(s),c=n(3),f=(r(c),n(7)),l=r(f),p=n(11),d=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return u(e,t),e.prototype.when=function(t,e){var n=this;return function(r,o,i){n.state=o,n.Component=i;var u=t(r,n,o,i);return u=n.flagObject(u),u&&n.send(e),u}},e.prototype.setState=function(t){return this.state=t,this},e.prototype.setComponent=function(t){return this.Component=t,this},e.prototype.flagObject=function(t){return t instanceof p.Do?(Object.defineProperty(t.part,"__kompo_stale__",{writable:!0,value:t.it}),t.it):t},e.prototype["do"]=function(t){var e=this;return function(n){var r=t(n,e.state,e.Component);if(r=e.flagObject(r)){var o=e.Component.getRoot();null===o?(0,l["default"])(e.Component.update.bind(e.Component)):(0,l["default"])(o.update.bind(o))}}},e}(a["default"]);e["default"]=d}]);
//# sourceMappingURL=ajax.js.map