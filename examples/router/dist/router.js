!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),s=r(u),l=n(2),c=r(l),f=n(9),p=r(f),d=n(17),h=r(d),m=n(16),v=r(m),y=n(19),g=r(y),b=n(18),w=r(b);(0,p["default"])();var _=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.create=function(){var t=(0,c["default"])(),e=(0,c["default"])("h1").txt("Router example - Kompo"),n=(0,c["default"])("nav"),r=(0,c["default"])("div");r.classList.add("content");var o=this.mount(new v["default"]("","Index")),i=this.mount(new v["default"]("simple","Simple")),a=this.mount(new v["default"]("param/123","Param")),u=this.mount(new v["default"]("branch","Nested index")),s=this.mount(new v["default"]("branch/simple","Nested simple")),l=this.mount(new v["default"]("rooted_nested","Rooted nested simple")),f=this.mount(new v["default"]("nonexisting","Non existing route"));return n.append(o,!1).append(i,!1).append(a,!1).append(u,!1).append(s,!1).append(l,!1).append(f,!1),this.mountRoutedComponent(r),t.append(e,!1).append(n,!1).append(r,!1),t},e}(s["default"]),O=new d.Route("/",new _,[new d.IndexRoute(new g["default"]({heading:"Index component"})),new d.Route("simple",new g["default"]({heading:"Simple component"})),new d.Route("param/:param",new g["default"]({heading:"Route with a param, shown in Component"})),new d.Route("branch",new w["default"],[new d.IndexRoute(new g["default"]({heading:"Nested index component"})),new d.Route("simple",new g["default"]({heading:"Nested simple component"})),new d.Route("/rooted_nested",new g["default"]({heading:"Rooted nested component"}))])]),j={},P=new h["default"](j,O,"/kompo/examples/router/",{notFoundCallback:function(t){alert("Url: "+t+" not found")}}),C=P.getComponent(null);C.setState(j),document.body.append(C)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n,r,o){if(e.call(t,n,r,t,o)){var i=t.getRoot();null===i?(0,s["default"])(t.update.bind(t)):(0,s["default"])(i.update.bind(i))}}var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var u=n(7),s=r(u),l=n(6),c=r(l),f=n(5),p=r(f),d=n(3),h=r(d),m=n(8),v=(r(m),function(){function t(e){o(this,t);var n=a({},this.constructor.defaultProps);"undefined"!=typeof n&&"undefined"!=typeof e?this.props=(0,c["default"])(n,e):this.props=e||n||{},this.statefulls=[],this.mounts=[],this.stateless=!0,this.isolated=!1,this.initial=!0}return t.prototype.create=function(){throw new Error("Component must override the create method and return an Node object.")},t.prototype.render=function(){return this.initial?(this.root=this.create(),this.initial=!1,Object.defineProperty(this.root,"__kompo_component__",{writable:!0,value:this}),this.root):(this.update(),this.root)},t.prototype.update=function(){for(var t=0,e=this.mounts.length;e>t;t++){var n=this.mounts[t];n.stateless||n.isolated||n.update()}for(var t=0,e=this.statefulls.length;e>t;t++)this.statefulls[t](this.state,this)},t.prototype.mount=function(t){return this.mounts.push(t),t.setParent(this),t.setState(this.state),t},t.prototype.unmount=function(t){var e=this.mounts.indexOf(t);return this.mounts.splice(e,1),this},t.prototype.unmountByIndex=function(t){var e=this.mounts[t];return this.mounts.splice(t,1),e},t.prototype.setParent=function(t){return this.parent=t,this},t.prototype.react=function(t){if(this.stateless)throw new Error("Set state (through mount() or setState()) before registering a react function.");return this.statefulls.push(t),t(this.state,this)},t.prototype.mountRoutedComponent=function(t){var e=this,n=!1;if((0,h["default"])(t))n=!0;else if(!t instanceof Node)throw new Error("Routed Component cannot be assigned. Please make sure parent is a Node or a closure.");return this.react(function(r,o){var i=r.Router.getComponent(e);return i&&(i.setParent(e),i.setState(r),n?t.bind(e)(i,r,o):(0,p["default"])(t,i)),i})},t.prototype.setState=function(t){return this.stateless=!1,this.state=t,this},t.prototype.setIsolatedState=function(t){return this.setState(t),this.isolated=!0,this},t.prototype.nest=function(t){if(1===arguments.length){if(!(0,h["default"])(t))throw new Error("Nesting callback should be a function, please provide a valid callback.");return this.nest=t,this}return this.nest(this.state,this)},t.prototype.on=function(t,e,n,r){var o=this;return 4===arguments.length?!function(){var a=e;e=n,n=r,t.addEventListener(e,function(t){for(var e=void 0,r=void 0,u=t.target;u&&u!=this;u=u.parentNode)if(u.matches(a)&&(e=t),"undefined"!=typeof u.__kompo_component__){r=u.__kompo_component__;break}"undefined"!=typeof e&&i(o,n,e,o.state,r)},!1)}():t.addEventListener(e,function(t){i(o,n,t,o.state)},!1),this},t.prototype.off=function(t,e){return t.removeEventListener(e,i,!1),this},t.prototype.getRoot=function(){if("undefined"==typeof this.parent||this.isolated)return null;for(var t=this.parent;"undefined"!=typeof t.parent&&!t.isolated;)t=t.parent;return t},t}());e["default"]=v},function(t,e){"use strict";function n(t,e){var n=void 0;return n="undefined"==typeof t?a.createElement("div"):a.createElement(t),"undefined"!=typeof e&&r(n,e),n}function r(t,e){for(var n=Object.keys(e),r=0,o=n.length;o>r;r++){var i=n[r],a=e[i];t.setAttribute(i,a)}return t}function o(){return a.createDocumentFragment()}function i(t){return a.createTextNode(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,e.addAttributes=r,e.createFragment=o,e.createText=i;var a=document},function(t,e){"use strict";function n(t){var e={};return t&&"[object Function]"===e.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t){var e="undefined"==typeof t?"undefined":r(t);return"function"==e||t&&"object"==e||!1}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=(0,c["default"])(arguments[2]),u=void 0;return u=o?r?t.lastChild:t.firstChild:n?t.lastChild:t.firstChild,"string"==typeof e&&(e=(0,a["default"])(e)),e instanceof s["default"]&&(e=e.render()),o&&(0,i.addAttributes)(e,n),u?t.replaceChild(e,u):t.appendChild(e),e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var i=n(2),a=r(i),u=n(1),s=r(u),l=n(4),c=r(l)},function(t,e){"use strict";function n(){for(var t=Array.prototype.shift.call(arguments),e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){if(!Element.prototype.matches){var t=Element.prototype;t.webkitMatchesSelector&&(t.matches=t.webkitMatchesSelector),t.msMatchesSelector&&(t.matches=t.msMatchesSelector),t.mozMatchesSelector&&(t.matches=t.mozMatchesSelector)}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){function e(e){return n?e:t+(0,a["default"])(e)}var n="undefined"==typeof t,r=document,o=Element.prototype,i=DocumentFragment.prototype;Object.defineProperty(o,e("attr"),{value:function(t,e){return 1===arguments.length?this.getAttribute(t):(this.setAttribute(t,e),this)}}),Object.defineProperty(o,e("hasAttr"),{value:function(t){return this.hasAttribute(t)}}),Object.defineProperty(o,e("removeAttr"),{value:function(t){return this.removeAttribute(t),this}}),Object.defineProperty(o,e("txt"),{value:function(t){return 1===arguments.length?(this.appendChild(r.createTextNode(t)),this):this.textContent}});var u=e("append"),l=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];return"string"==typeof t&&(t=r.createElement(t)),t instanceof s["default"]&&(t=t.render()),this.appendChild(t),(0,d["default"])(arguments[1])?((0,f.addAttributes)(t,e),n?t:this):e?t:this};Object.defineProperty(o,u,{value:l}),Object.defineProperty(i,u,{value:l}),Object.defineProperty(o,e("parentAppend"),{value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];return this.parentNode.append(t,e,n)}}),Object.defineProperty(o,e("cloneAppend"),{value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this.parentNode.append(this.cloneNode(t))}});var p=e("clone"),h=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this.cloneNode(t)};Object.defineProperty(o,p,{value:h}),Object.defineProperty(i,p,{value:h});var m=e("prepend"),v=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],o=this.firstChild;return"string"==typeof t&&(t=r.createElement(t)),t instanceof s["default"]&&(t=t.render()),o?this.insertBefore(t,o):this.append(t),(0,d["default"])(arguments[1])?((0,f.addAttributes)(t,e),n?t:this):e?t:this};Object.defineProperty(o,m,{value:v}),Object.defineProperty(i,m,{value:v}),Object.defineProperty(o,e("parent"),{value:function(){return this.parentElement||this.parentNode}}),Object.defineProperty(o,e("hasParent"),{value:function(){return!(null===this.parentElement&&null===this.parentNode)}}),Object.defineProperty(o,e("root"),{value:function(t){for(t=t?t:this.parentElement||this.parentNode;null!==(t.parentElement||t.parentNode);)t=this.root(t.parentElement||t.parentNode);return t}});var y=e("query"),g=function(t){return this.querySelector(t)};Object.defineProperty(o,y,{value:g}),Object.defineProperty(i,y,{value:g});var b=e("queryAll"),w=function(t){return this.querySelectorAll(t)};Object.defineProperty(o,b,{value:w}),Object.defineProperty(i,b,{value:w}),"remove"in o||Object.defineProperty(o,e("remove"),{value:function(){var t=this.parentNode;t&&t.removeChild(this)}});var _=e("empty"),O=function(){for(;this.lastChild;)this.removeChild(this.lastChild);return this};Object.defineProperty(o,_,{value:O}),Object.defineProperty(i,_,{value:O}),Object.defineProperty(o,e("log"),{value:function(){return console.log(this),this}}),Object.defineProperty(o,e("replace"),{value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return(0,c["default"])(this,t,e)}}),Object.defineProperty(o,e("replaceWith"),{value:function(t,e){return"string"==typeof t&&(t=r.createElement(t)),"undefined"!=typeof e&&(0,f.addAttributes)(t,e),this.parentNode.replaceChild(this,t),t}}),Object.defineProperty(o,e("before"),{value:function(t,e){var n=this.parentNode;return"string"==typeof t&&(t=r.createElement(t)),t instanceof s["default"]&&(t=t.render()),"undefined"!=typeof e&&(0,f.addAttributes)(t,e),n&&n.insertBefore(t,this),t}}),Object.defineProperty(o,e("after"),{value:function(t,e){var n=this.parentNode,o=this.nextSibling;return"string"==typeof t&&(t=r.createElement(t)),t instanceof s["default"]&&(t=t.render()),"undefined"!=typeof e&&(0,f.addAttributes)(t,e),n&&(o?n.insertBefore(t,o):n.appendChild(t)),t}}),Object.defineProperty(o,e("i"),{value:function(t){return 0===arguments.length?this.id:(this.id=t,this)}}),Object.defineProperty(o,e("n"),{value:function(t){return 0===arguments.length?this.name:(this.name=t,this)}}),Object.defineProperty(o,e("h"),{value:function(t){return 0===arguments.length?this.href:(this.href=t,this)}}),Object.defineProperty(o,e("v"),{value:function(t){return 0===arguments.length?this.value:(this.value=t,this)}})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var i=n(10),a=r(i),u=n(1),s=r(u),l=n(5),c=r(l),f=n(2),p=n(4),d=r(p)},function(t,e){"use strict";function n(t){return"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),s=r(u),l=n(3),c=r(l),f=function(t){function e(n,r,a){o(this,e);var u=i(this,t.call(this,a));return u.url=n,u.child=r,u}return a(e,t),e.prototype.create=function(){var t=this,e=document.createElement("a"),n=this.props.classNames,r=n.length;if(r>0)for(var o=0;r>o;++o)e.classList.add(n[o]);if(this.react(function(n){var r=t.props.activeClass;n.Router.isUrl(t.url)?e.classList.add(r):e.classList.remove(r)}),e.setAttribute("href",this.url),"string"==typeof this.child)e.appendChild(document.createTextNode(this.child));else if(this.child instanceof s["default"])this.mount(this.child),e.appendChild(this.child.render());else if(this.child instanceof Node)e.appendChild(this.child);else{if(!(0,c["default"])(this.nest))throw new Error("Child should be a string, Component, Node or a nest callback");e.appendChild(this.nest())}return this.on(e,this.props.defaultEvent,function(e,n){return e.preventDefault(),n.Router.goTo(t.url,t.props.title,t.props.data)}),e},e}(s["default"]);e["default"]=f,f.defaultProps={classNames:[],data:{},title:"",defaultEvent:"click",activeClass:"active"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.IndexRoute=e.Route=void 0;var u=n(7),s=r(u),l=n(6),c=r(l),f=n(3),p=r(f),d=n(1),h=r(d),m=function(){function t(e,n){var r=this,o=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];a(this,t),e.Router=this,this.state=e,this.options=(0,c["default"])({notFoundCallback:null},i),this.setBase(o),this.url="/",this.rawRoutes={},this.routes={},this.index=0,this.params=[],this.parseRoute(n),window.addEventListener("popstate",function(){r.setUrl(window.location.pathname.replace(r.base,""));var t=r.getCurrentComponent(null);(0,s["default"])(t.update.bind(t))})}return t.prototype.setBase=function(t){"/"!==t[0]&&(t="/"+t),"/"===t.slice(-1)&&(t=t.slice(0,-1)),this.base=t},t.prototype.goTo=function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return this.isUrl(t)?!1:(this.setUrl(t),this.data=n,history.pushState(n,e,this.base+this.url),!0)},t.prototype.getComponent=function(t){return t instanceof h["default"]&&(this.index=t.level+1),this.match(this.url,this.routes)[this.index]},t.prototype.getCurrentComponent=function(t){var e=null===t;if(!e||!t instanceof h["default"])throw new Error("Cannot get current Component.Parameter parent must be null for the root parent or a Component to return its child component");var n=this.match(this.url,this.routes);return e?n[0]:n[t.level+1]},t.prototype.match=function(t,e){for(var n=Object.keys(e),r=0,o=n.length;o>r;r++){var i=n[r],a=t.match(new RegExp("^"+i+"$"));if(null!==a)return a.shift(),this.params=a,e[i]}if(!(0,p["default"])(this.options.notFoundCallback))throw new Error("No matching route found for url: "+t+". Provide a notFoundCallback callback option or correct the url or route.");return this.options.notFoundCallback.call(this,t),[]},t.prototype.getUrl=function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return t?this.url:this.url.substring(1)},t.prototype.setUrl=function(t){this.url="/"===t[0]?t:"/"+t},t.prototype.isUrl=function(t){return t="/"===t[0]?t:"/"+t,this.url===t},t.prototype.parseRoute=function(t){this.buildPath(t);for(var e=Object.keys(this.rawRoutes),n=0,r=e.length;r>n;n++){var o=e[n],i=o.replace(/(:([\w-]+))/g,"([\\w-]+)").replace(/\//g,"\\/");this.routes[i]=this.rawRoutes[o]}},t.prototype.buildPath=function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=t.children,o=t.component;if(o.level=n,r)for(var i=t.path,a=0===e.length,u=0,s=r.length;s>u;u++){var l=r[u],c=a?e.concat(o,l.component):e.concat(l.component),f=void 0;f="/"===l.path[0]?l.path:a?i+l.path:l instanceof y?i:i+"/"+l.path,l.path=f,this.rawRoutes[f]=c,this.buildPath(l,c,n+1)}},t}();e["default"]=m;var v=e.Route=function g(t,e){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];a(this,g),this.path=t,this.component=e,this.children=n},y=e.IndexRoute=function(t){function e(n){return a(this,e),o(this,t.call(this,"",n))}return i(e,t),e}(v)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),s=r(u),l=n(2),c=r(l),f=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.create=function(){var t=(0,c["default"])(),e=(0,c["default"])("h2").txt(this.props.heading),n=(0,c["default"])("div");return n.classList.add("content"),t.append(e,!1).append(n),this.mountRoutedComponent(n),t},e}(s["default"]);e["default"]=f,f.defaultProps={heading:"Branch component"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),s=r(u),l=n(2),c=r(l),f=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.create=function(){var t=this,e=(0,c["default"])(),n=(0,c["default"])("h2").txt(this.props.heading),r=(0,c["default"])("span");return e.append(n,!1).append(r),this.react(function(e){var n=e.Router.params;n.length>0&&r.replace((0,l.createText)("Param at index "+t.props.paramIndex+" = "+n[t.props.paramIndex]))}),e},e}(s["default"]);e["default"]=f,f.defaultProps={heading:"Leaf component",paramIndex:0}}]);
//# sourceMappingURL=router.js.map