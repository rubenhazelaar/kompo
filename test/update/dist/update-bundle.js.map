{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d4a7caf07912732fab77","webpack:///./src/component/component.js","webpack:///./src/util/hasProxy.js","webpack:///./src/util/isObject.js","webpack:///./examples/update/src/update.js","webpack:///./src/state/observe.js","webpack:///./src/util/merge.js"],"names":["construct","constructClass","render","update","_debug_update","kompo","setState","getState","mount","unmount","unmountAll","mountIndex","react","slot","hasSlot","getRouter","compose","getProps","getMethods","getMounts","mountable","Object","defineProperty","Element","prototype","writable","value","Error","tag","constructFn","defaultProps","props","c","document","createElement","methods","initial","statefulls","selector","state","__kompo__","i","l","length","mounts","isRoot","root","checkIfDirty","Array","isArray","hasOwnProperty","__kompo_dirty__","console","log","slots","routed","undefined","parent","child","_mountAll","_mount","Mountable","indexOf","splice","push","children","unm","statefull","name","cb","arguments","router","constructComponent","composeProps","clss","obj","ps","getOwnPropertyNames","fps","p","apply","getPrototypeOf","window","isObject","type","testArray","testElementComponent","testElement","shuffle","o","observe","inheritObserved","markClean","markDirty","reservedKeys","isObj","observeObjectFallback","keys","key","Proxy","target","thisArg","argumentList","deleteProperty","set","prop","val","get","newKey","v","ignored","merge","object","shift","call","j"],"mappings":"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","file":"examples/update/dist/update-bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"kompo\"] = factory();\n\telse\n\t\troot[\"kompo\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d4a7caf07912732fab77","// @flow\r\nimport merge from '../util/merge';\r\nimport hasProxy from '../util/hasProxy';\r\nimport isObject from '../util/isObject';\r\nimport {markClean} from '../state/observe';\r\n\r\n/**\r\n * Adds construct function to Element prototype\r\n */\r\nObject.defineProperty(Element.prototype, 'construct', {\r\n    writable: true,\r\n    value: function () {\r\n        throw new Error('Must override the construct method');\r\n    }\r\n});\r\n\r\n/**\r\n * Creates a compnent from an Element\r\n *\r\n * @param tag\r\n * @param constructFn\r\n * @param defaultProps\r\n * @returns {function()}\r\n */\r\nexport default function construct(tag:string, constructFn:constructFn, defaultProps:props = {}):constructComponent {\r\n    return (props = {}) => {\r\n        const c = kompo(document.createElement(tag));\r\n        c.kompo.props = merge({}, defaultProps, props);\r\n        c.construct = constructFn;\r\n        return c;\r\n    };\r\n}\r\n\r\nexport function constructClass(tag:string, constructClass:any, defaultProps:props = {}):constructComponent {\r\n    const methods = getMethods(constructClass.prototype);\r\n    return (props = {}) => {\r\n        const c = kompo(document.createElement(tag));\r\n        c.kompo.props = merge({}, defaultProps, props);\r\n        merge(c, methods);\r\n        return c;\r\n    };\r\n}\r\n\r\n/**\r\n * Renders given component\r\n *\r\n * @param Element\r\n */\r\nexport function render(Element:KompoElement):void {\r\n    const kompo = Element.kompo;\r\n    if (kompo.initial) {\r\n        // Construct then ...\r\n        Element.construct(kompo.props);\r\n        kompo.initial = false;\r\n\r\n        // ... react\r\n        const statefulls = kompo.statefulls,\r\n            selector = kompo.selector,\r\n            state = selector ? selector(Element.__kompo__.state) : Element.__kompo__.state;\r\n        for (let i = 0, l = statefulls.length; i < l; ++i) {\r\n            statefulls[i](state, Element);\r\n        }\r\n    } else {\r\n        update(Element)\r\n    }\r\n}\r\n\r\nexport function update(Element:KompoElement):void {\r\n    const kompo = Element.kompo,\r\n        mounts = kompo.mounts,\r\n        statefulls = kompo.statefulls,\r\n        isRoot = Element === Element.__kompo__.root;\r\n\r\n    // Only run if a component has statefulls\r\n    if (statefulls.length > 0) {\r\n        const selector = kompo.selector,\r\n            state = selector ? selector(Element.__kompo__.state) : Element.__kompo__.state;\r\n\r\n        // State is false, do not run statefulls\r\n        if (state) {\r\n            // If is object and flagged dirty or not at all than do not update\r\n            const checkIfDirty = hasProxy?\r\n                isObject(state) || Array.isArray(state):\r\n                isObject(state) && !Array.isArray(state);\r\n    \r\n            if (!(\r\n                checkIfDirty\r\n                && state.hasOwnProperty('__kompo_dirty__')\r\n                && state.__kompo_dirty__.length === 0\r\n            )) {\r\n                for (let i = 0, l = statefulls.length; i < l; ++i) {\r\n                    statefulls[i](state, Element);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    for (let i = 0, l = mounts.length; i < l; ++i) {\r\n        render(mounts[i]);\r\n    }\r\n\r\n    if (isRoot) {\r\n        markClean(Element.__kompo__.state);\r\n    }\r\n}\r\n\r\nexport function _debug_update(Element:KompoElement):void {\r\n    const kompo = Element.kompo,\r\n        mounts = kompo.mounts,\r\n        statefulls = kompo.statefulls,\r\n        isRoot = Element === Element.__kompo__.root;\r\n    \r\n    console.log(kompo);\r\n\r\n    // Only run if a component has statefulls\r\n    if (statefulls.length > 0) {\r\n        \r\n        console.log('Has statefulls');\r\n        \r\n        const selector = kompo.selector,\r\n            state = selector ? selector(Element.__kompo__.state) : Element.__kompo__.state;\r\n\r\n        // State is false, do not run statefulls\r\n        if (state) {\r\n\r\n            console.log('State is valid');\r\n            \r\n            // If is object and flagged dirty or not at all than do not update\r\n            const checkIfDirty = hasProxy?\r\n            isObject(state) || Array.isArray(state):\r\n            isObject(state) && !Array.isArray(state);\r\n            \r\n            console.log('Check if dirty is = ', checkIfDirty);\r\n\r\n            if (!(\r\n                    checkIfDirty\r\n                    && state.hasOwnProperty('__kompo_dirty__')\r\n                    && state.__kompo_dirty__.length === 0\r\n                )) {\r\n                \r\n                console.log('Running statefulls');\r\n                \r\n                for (let i = 0, l = statefulls.length; i < l; ++i) {\r\n                    statefulls[i](state, Element);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    for (let i = 0, l = mounts.length; i < l; ++i) {\r\n        render(mounts[i]);\r\n    }\r\n\r\n    if (isRoot) {\r\n        markClean(Element.__kompo__.state);\r\n    }\r\n}\r\n\r\nexport function kompo(Element:Element):KompoElement {\r\n    Element.kompo = {\r\n        initial: true,\r\n        props: {},\r\n        defaultProps: {},\r\n        mounts: [],\r\n        statefulls: [],\r\n        slots: {},\r\n        routed: undefined,\r\n        selector: undefined,\r\n        // state: undefined, // TODO Unavailable now but could perhaps be used as caching mechanism (also see setState())\r\n        unmount: undefined\r\n    };\r\n\r\n    return Element;\r\n}\r\n\r\nexport function setState(Element:KompoElement, selector:selector):KompoElement {\r\n    const kompo = Element.kompo;\r\n    // TODO Unavailable now but could perhaps be used as caching mechanism\r\n    // if(apply) kompo.state = selector(Element.__kompo__.state);\r\n    kompo.selector = selector;\r\n    return Element;\r\n}\r\n\r\nexport function getState(Element:KompoElement):any {\r\n    const selector = Element.kompo.selector;\r\n    return selector ?\r\n        selector(Element.__kompo__.state) :\r\n        Element.__kompo__.state\r\n}\r\n\r\nexport function mount(\r\n    parent:KompoElement,\r\n    child:KompoElement|Array<KompoElement>|Mountable|Array<Mountable>,\r\n    selector:?selector\r\n):void {\r\n    if (Array.isArray(child)) {\r\n        _mountAll(parent, child, selector);\r\n    } else {\r\n        _mount(parent, child, selector)\r\n    }\r\n}\r\n\r\nfunction _mount(parent:KompoElement, child:KompoElement|Mountable, selector:?selector):void {\r\n    if (selector) {\r\n        setState(child, selector);\r\n    } else if (child instanceof Mountable) {\r\n        setState(child.Element, child.selector);\r\n        child = child.Element;\r\n    }\r\n\r\n    render(child);\r\n\r\n    // Protection if same element is appended multiple times\r\n    const mounts = parent.kompo.mounts;\r\n    if (mounts.indexOf(child) === -1) {\r\n        child.kompo.unmount = Element => {\r\n            mounts.splice(mounts.indexOf(Element), 1);\r\n        };\r\n        mounts.push(child);\r\n    }\r\n}\r\n\r\nfunction _mountAll(parent:KompoElement, children:Array<KompoElement>|Array<Mountable>, selector:?selector):void {\r\n    // Mount all children ...\r\n    for (let i = 0, l = children.length; i < l; ++i) {\r\n        _mount(parent, children[i], selector? selector: undefined);\r\n    }\r\n}\r\n\r\nexport function unmount(Element:KompoElement):void {\r\n    const unm = Element.kompo.unmount;\r\n    if (unm) {\r\n        unm(Element);\r\n    }\r\n}\r\n\r\nexport function unmountAll(Element:KompoElement):void {\r\n    Element.kompo.mounts = [];\r\n}\r\n\r\nexport function mountIndex(parent:KompoElement, child:KompoElement):Number {\r\n    return parent.kompo.mounts.indexOf(child);\r\n}\r\n\r\nexport function react(Element:KompoElement, statefull:statefull):void {\r\n    Element.kompo.statefulls.push(statefull);\r\n}\r\n\r\n/**\r\n * Mimics the slot functionality of\r\n * Web Components\r\n *\r\n * Slots are named, their name & location is\r\n * predefined in the component.\r\n *\r\n * @param Element\r\n * @param name\r\n * @param cb\r\n */\r\nexport function slot(Element:KompoElement, name:string, cb:?slotCallback):void {\r\n    if (arguments.length === 2) {\r\n        Element.kompo.slots[name](Element);\r\n    } else {\r\n        Element.kompo.slots[name] = cb;\r\n    }\r\n}\r\n\r\n/**\r\n * Checks whether a slot with the given name exists\r\n *\r\n * @param Element\r\n * @param name\r\n * @returns {boolean}\r\n */\r\nexport function hasSlot(Element:KompoElement, name:string):boolean {\r\n    return Element.kompo.slots[name] ? true : false;\r\n}\r\n\r\n/**\r\n * Gets the router from an Element. The router is\r\n * add globally to the Element prototype\r\n *\r\n * @param Element\r\n * @returns {router}\r\n */\r\nexport function getRouter(Element:KompoElement):router {\r\n    return Element.__kompo__.router;\r\n}\r\n\r\n/**\r\n * Adds properties to an existing component,\r\n * making it possible to compose a component with\r\n * different behavior.\r\n *\r\n * @param constructComponent\r\n * @param composeProps\r\n * @returns {function()}\r\n */\r\nexport function compose(constructComponent:constructComponent, composeProps:props):constructComponent {\r\n    return (props = {}) => {\r\n        return constructComponent(merge(composeProps, props));\r\n    };\r\n}\r\n\r\nexport function getProps(Element:KompoElement):props {\r\n    return Element.kompo.props;\r\n}\r\n\r\nexport function getMethods(clss) {\r\n    const props = [],\r\n        methods = {};\r\n\r\n    let obj = clss;\r\n\r\n    do {\r\n        const ps = Object.getOwnPropertyNames(obj);\r\n\r\n        const fps = [];\r\n        for (let i = 0, l = ps.length; i < l; ++i) {\r\n            const p = ps[i];\r\n            if (\r\n                typeof obj[p] === 'function'    //only the methods\r\n                && p != 'constructor'           //not the constructor\r\n                && (i == 0 || p !== ps[i - 1])  //not overriding in this prototype\r\n                && props.indexOf(p) === -1      //not overridden in a child\r\n            ) {\r\n                fps.push(p);\r\n                methods[p] = clss[p];\r\n            }\r\n        }\r\n\r\n        props.push.apply(props, fps);\r\n    } while (\r\n    (obj = Object.getPrototypeOf(obj)) &&   //walk-up the prototype chain\r\n    Object.getPrototypeOf(obj)              //not the the Object prototype methods (hasOwnProperty, etc...)\r\n        );\r\n\r\n    return methods;\r\n}\r\n\r\nexport function getMounts(Element:KompoElement):mounts {\r\n    return Element.kompo.mounts;\r\n}\r\n\r\nclass Mountable {\r\n    Element:KompoElement;\r\n    selector:selector;\r\n    \r\n    constructor(Element:KompoElement, selector:selector) {\r\n        this.Element = Element;\r\n        this.selector = selector;\r\n    }\r\n}\r\n\r\nexport function mountable(Element:KompoElement, selector:selector):Mountable {\r\n    return new Mountable(Element, selector)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/component/component.js","export default ('Proxy' in window);\n\n\n// WEBPACK FOOTER //\n// ./src/util/hasProxy.js","// @flow\r\n/**\r\n * Checks if `value` is the language type of `Object`.\r\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\r\n *\r\n * **Note:** See the [ES5 spec](https://es5.github.io/#x8) for more details.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\r\n * @example\r\n *\r\n * _.isObject({});\r\n * // => true\r\n *\r\n * _.isObject([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isObject(1);\r\n * // => false\r\n */\r\nexport default function isObject(value: any): boolean {\r\n    // Avoid a V8 JIT bug in Chrome 19-20.\r\n    // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\r\n    let type = typeof value;\r\n    return type == 'function' || (value && type == 'object') || false;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/isObject.js","import construct, {react, render, _debug_update, setState} from '../../../src/component/component';\r\nimport observe from '../../../src/state/observe';\r\n\r\nconst testArray = observe([1,2,3,4,5]),\r\n    testElementComponent = construct('div', function() {\r\n        console.log('Construct test element');\r\n        react(this, state => {\r\n            console.log('React test element');\r\n            console.log(state);\r\n        })\r\n    }),\r\n    testElement = testElementComponent();\r\n\r\n// To get it working\r\ntestElement['__kompo__'] = {root: testElement};\r\n\r\nsetState(testElement, () => {\r\n    return shuffle(testArray);\r\n});\r\n\r\nrender(testElement);\r\n\r\n_debug_update(testElement);\r\n_debug_update(testElement);\r\n_debug_update(testElement);\r\n\r\n/**\r\n * Util functions\r\n */\r\nfunction shuffle(o) {\r\n    // for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);\r\n    return o;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./examples/update/src/update.js","// @flow\r\nimport hasProxy from '../util/hasProxy';\r\nimport isObject from '../util/isObject';\r\n\r\nconst reservedKeys = ['length', '__kompo_dirty__'];\r\n\r\nexport default function observe(obj:any) {\r\n    const isObj = isObject(obj),\r\n        isArray = Array.isArray(obj);\r\n\r\n    if (!isObj && !isArray) return obj;\r\n\r\n    Object.defineProperty(obj, '__kompo_dirty__', {\r\n        writable: true,\r\n        value: []\r\n    });\r\n\r\n    if (!hasProxy) {\r\n        obj = observeObjectFallback(obj);\r\n    } else {\r\n        const keys = Object.keys(obj);\r\n        for (let i = 0, l = keys.length; i < l; ++i) {\r\n            const key = keys[i];\r\n            if (reservedKeys.indexOf(key) === -1) {\r\n                obj[key] = observe(obj[key]);\r\n            }\r\n        }\r\n\r\n        if (isArray) {\r\n            obj = new Proxy(obj, {\r\n                apply: function (target, thisArg, argumentList) {\r\n                    target.__kompo_dirty__.push(true);\r\n                    return thisArg[target].apply(this, argumentList);\r\n                },\r\n                deleteProperty: function (target) {\r\n                    target.__kompo_dirty__.push(true);\r\n                    return true;\r\n                },\r\n                set: function (target, prop, val) {\r\n                    if (\r\n                        prop !== '__kompo_dirty__'\r\n                        && val != target[prop]\r\n                        && target.__kompo_dirty__.indexOf(prop) === -1\r\n                    ) {\r\n                        target.__kompo_dirty__.push(prop);\r\n                    }\r\n\r\n                    target[prop] = observe(val);\r\n                    return true;\r\n                }\r\n            });\r\n        } else {\r\n            obj = new Proxy(obj, {\r\n                get: function (target, prop) {\r\n                    return target[prop];\r\n                },\r\n                set: function (target, prop, val) {\r\n                    if (\r\n                        prop !== '__kompo_dirty__'\r\n                        && val != target[prop]\r\n                        && target.__kompo_dirty__.indexOf(prop) === -1\r\n                    ) {\r\n                        target.__kompo_dirty__.push(prop);\r\n                    }\r\n\r\n                    target[prop] = observe(val);\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\nfunction observeObjectFallback(obj: any): any {\r\n    if (!isObject(obj)) return; // A no-op when it id not an object\r\n\r\n    const keys = Object.keys(obj);\r\n    for (let i = 0, l = keys.length; i < l; ++i) {\r\n        const key = keys[i],\r\n            newKey = '__' + key,\r\n            v = obj[key];\r\n\r\n        Object.defineProperty(obj, newKey, {\r\n            writable: true,\r\n            value: v\r\n        });\r\n\r\n        Object.defineProperty(obj, key, {\r\n            get: function () {\r\n                return this[newKey]\r\n            },\r\n            set: function (val) {\r\n                if (isObject(val)) {\r\n                    observe(val);\r\n                }\r\n\r\n                if (val != this[key] && obj.__kompo_dirty__.indexOf(key) === -1) {\r\n                    obj.__kompo_dirty__.push(key);\r\n                }\r\n                this[newKey] = val;\r\n            }\r\n        });\r\n\r\n        obj[key] = v;\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\nexport function inheritObserved(obj:any, ignored: Array<any> = []): any {\r\n    Object.defineProperty(obj, '__kompo_dirty__', {\r\n        writable: true,\r\n        value: []\r\n    });\r\n\r\n    const keys = Object.keys(obj);\r\n\r\n    for (let i = 0, l = keys.length; i < l; ++i) {\r\n        const key = keys[i],\r\n            value = obj[key];\r\n\r\n        if(ignored.indexOf(key) !== -1) continue;\r\n\r\n        if(typeof value === 'undefined') return;\r\n\r\n        if(\r\n            value\r\n            && value.hasOwnProperty('__kompo_dirty__')\r\n            && value.__kompo_dirty__.length > 0\r\n        ) {\r\n            obj.__kompo_dirty__.push(true);\r\n        }\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\nexport function markClean(obj: any): void {\r\n    const isObj = isObject(obj),\r\n        isArray = Array.isArray(obj);\r\n\r\n    if (!isObj && !isArray) return obj;\r\n\r\n    obj.__kompo_dirty__ = [];\r\n\r\n    if (isArray) {\r\n        for (let i = 0, l = obj.length; i < l; ++i) {\r\n            markClean(obj[i]);\r\n        }\r\n    } else {\r\n        const keys = Object.keys(obj);\r\n        for (let i = 0, l = keys.length; i < l; ++i) {\r\n            markClean(obj[keys[i]]);\r\n        }\r\n    }\r\n}\r\n\r\nexport function markDirty(obj:any): void {\r\n    if (!isObject(obj)) return; // A no-op on all but Object and Arrays\r\n\r\n    if (!obj.hasOwnProperty('__kompo_dirty__')) {\r\n        Object.defineProperty(obj, '__kompo_dirty__', {\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    obj.__kompo_dirty__.push(true);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/state/observe.js","// @flow    \r\n/**\r\n * Merges given objects\r\n *\r\n * @param {...Object} objs - Any given amount of objects\r\n * @returns {Object}\r\n */\r\nexport default function merge(): { [key: any]: any } {\r\n    var object: { [key: any]: any } = Array.prototype.shift.call(arguments);\r\n    for (let i = 0; i < arguments.length; i++) {\r\n        let obj: { [key: any]: any } = arguments[i];\r\n        for (let j in obj) {\r\n            object[j] = obj[j];\r\n        }\r\n    }\r\n\r\n    return object;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/merge.js"],"sourceRoot":""}